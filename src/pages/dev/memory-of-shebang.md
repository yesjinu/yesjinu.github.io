---
layout: '../../layouts/BlogPost.astro'
title: Docker Alpine linuxì—ëŠ” /bin/bashê°€ ì—†ë‹¤.

pubDate: 2021-09-17T00:52:00.000Z


---

## [ë¬¸ì œ ë°œìƒ] ì™œ shell scriptë¥¼ ì°¾ì§€ ëª»í•˜ì§€? ğŸ”

GitLab runnerë¥¼ ì´ìš©í•œ ë¹Œë“œ ë° ë””í”Œë¡œì´ ê²°ê³¼(ì„±ê³µ/ì‹¤íŒ¨)ë¥¼ ìŠ¬ë™ìœ¼ë¡œ ë°›ì•„ë³´ê¸° ìœ„í•œ ì½”ë“œ ì‘ì—…ì„ ì§„í–‰í•˜ê³  ìˆì—ˆë‹¤. ìŠ¬ë™ ì›¹í›…ì˜ endpointì— ë¹Œë“œ ê²°ê³¼ë¥¼ ì •ë¦¬í•œ APIì„ í˜¸ì¶œí•˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•˜ê³ , `gitlab-ci.yml`ì—ì„œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê³  ìˆì—ˆë‹¤. ë§¤ë„ëŸ½ê²Œ ì¼ì´ ì™„ìˆ˜ë  ê²ƒì´ë¼ëŠ” ê¸°ëŒ€ì™€ëŠ” ë‹¤ë¥´ê²Œ **GitLab Runnerê°€ ë¹Œë“œ ì¤‘ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì°¾ì§€ ëª»í•˜ëŠ” ì—ëŸ¬**ê°€ ë°œìƒí•˜ë©° ë¹Œë“œ jobì´ ì¤‘ê°„ì— dropë˜ì—ˆë‹¤.

## [ì›ì¸ ì¶”ë¡ ] ë¬´ì—‡ì´ ë¬¸ì œì¼ê¹Œ? ğŸ”

### ê°€ì„¤ 1. Typo

Shell scriptì˜ íŒŒì¼ëª…ì„ ì˜ëª» ì…ë ¥í–ˆì„ ê°€ëŠ¥ì„±ì´ ìˆë‹¤. í•˜ì§€ë§Œ (ì•„ì‰½ê²Œë„) íŒŒì¼ëª…ì€ ì œëŒ€ë¡œ ì…ë ¥ë˜ì–´ ìˆì—ˆë‹¤.

### ê°€ì„¤ 2. ì‹¤í–‰ í™˜ê²½ì—ì„œ íŒŒì¼ì´ ë³´ì´ì§€ ì•ŠìŒ

ì‹¤í–‰ ë””ë ‰í† ë¦¬ê°€ ë‹¤ë¥´ë‹¤ë“ ì§€ í•˜ëŠ” ì´ìœ ë¡œ, ë¹Œë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì—ì„œ shell script íŒŒì¼ì´ ë³´ì´ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ìœ¼ë¡œ í™•ì¸í•´ë³´ì•˜ìœ¼ë‚˜ íŒŒì¼ì´ ë„ˆë¬´ë‚˜ ì˜ ë³´ì˜€ë‹¤. ì‚¬ê±´ì€ ì ì  ë¯¸ê¶ ì†ìœ¼ë¡œ ë¹ ì¡Œë‹¤.

    cat slack_notification.sh           # ì˜ ì¶œë ¥ë¨
    find . name "slack_notification.sh" # ì˜ ì°¾ì•„ì§
    ls -l                               # ë¦¬ìŠ¤íŠ¸ì—ì„œ ì˜ í™•ì¸ë¨

ë„ˆë¬´ë‚˜ë„ ì˜ ë³´ì´ëŠ” ìŠ¤í¬ë¦½íŠ¸
### ê°€ì„¤ 3. ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰(execute) ê¶Œí•œì´ ì—†ìŒ

íŒŒì¼ì— ì‹¤í–‰ê¶Œí•œì´ ë¶€ì—¬ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ `ls -l` ì»¤ë§¨ë“œë¡œ íŒŒì¼ì˜ ê¶Œí•œì„ í™•ì¸í•´ë³¸ ê²°ê³¼, ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì— execute ê¶Œí•œì€ ë¶€ì—¬ëœ ìƒíƒœì˜€ë‹¤. 

    -rwxr-xr-x   1 jinu  staff  1200 Sep 16 18:26 slack_notification.sh
    

userë„, groupë„, otherë„ ëª¨ë‘ ì´ íŒŒì¼ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.
ë§Œì•½ execute ê¶Œí•œì´ ì—†ì—ˆë‹¤ë©´ `permission denied` ì—ëŸ¬ê°€ ë‚¬ì„ ê²ƒì´ë‹¤.

### ê°€ì„¤ 4. shell executerì˜ ë¬¸ì œ

GitLab CI/CDëŠ” ì›í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” shell executerë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì„ ì œê³µí•œë‹¤([Link](https://docs.gitlab.com/runner/shells/#shbash-shells)). ëª…ì‹œì ìœ¼ë¡œ `/bin/bash` ë¥¼ ì§€ì •í•˜ë©´ ë¬¸ì œê°€ í•´ê²°ë ì§€ë„ ëª¨ë¥´ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆë‹¤.

    cat 'slack_notification.sh' | /bin/bash
    

ìœ„ ì»¤ë§¨ë“œëŠ” CI/CD ë¡œê·¸ì—ì„œ ë³¸ ê²ƒê³¼ ë˜‘ê°™ì€ not found ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼°ë‹¤. ì´ë•Œ ë¨¸ë¦¬ ì†ì„ ìŠ¤ì¹˜ëŠ” ë¬´ì–¸ê°€ê°€ ìˆì—ˆë‹¤.

## [ë¬¸ì œ í•´ê²°] ë¬¸ì œëŠ” shebangì´ì•¼! ğŸ•µï¸

ìš°ë¦¬ íŒ€ì˜ ë¹Œë“œ ì„œë²„ëŠ” `docker:latest` ë² ì´ìŠ¤ ì»¨í…Œì´ë„ˆì—ì„œ ìœ„ì—ì„œ ë¹Œë“œë¥¼ ì§„í–‰í•œë‹¤. `docker:latest` ì´ë¯¸ì§€ëŠ” `Alpine linux`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ ìˆì—ˆê³ ([Link](https://github.com/docker-library/docker/blob/5c42a7382f317ef94c16eb264ff9337ef4b9a260/20.10/Dockerfile#L7)), ê²½ëŸ‰í™”ëœ ë¦¬ëˆ…ìŠ¤ë¥¼ í‘œë°©í•˜ëŠ” `Alpine linux`ëŠ” `bash`ì¡°ì°¨ ì§€ì›í•˜ì§€ ì•Šê³  ìˆë˜ ê²ƒì´ë‹¤! (ëŒ€ì‹  Alpine linuxëŠ” BusyBoxê°€ ì œê³µí•˜ëŠ” `ash`ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤)

ë‚´ê°€ ì‹¤í–‰í•˜ê³ ì í–ˆë˜ 'slack_notification.sh'ì˜ ìƒë‹¨ì—ëŠ” `#!/bin/bash`(shebang)ì´ í¬í•¨ë˜ì–´ ìˆì—ˆë‹¤. Shebangìœ¼ë¡œ ì‹œì‘í•˜ëŠ” í…ìŠ¤íŠ¸ íŒŒì¼ì´ ìˆìœ¼ë©´ í”„ë¡œê·¸ë¨ ë¡œë”ëŠ” `#!`ì™€ í•¨ê»˜ ëª…ì‹œëœ ì¸í„°í”„ë¦¬í„°(ì—¬ê¸°ì—ì„œëŠ” `bash`)ë¥¼ ì‚¬ìš©í•´ ì•„ë˜ ë¼ì¸ë“¤ì„ line-by-lineìœ¼ë¡œ ì‹¤í–‰í•œë‹¤. ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— `/bin/bash`ê°€ ì—†ìœ¼ë‹ˆ not found ì—ëŸ¬ê°€ ë‚  ìˆ˜ ë°–ì— ì—†ë˜ ê²ƒì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ 2ê°€ì§€ê°€ ë  ê²ƒì´ë‹¤. ë¹Œë“œ ì»¨í…Œì´ë„ˆì— `bash`ë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜, alpine linuxê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” shellì¸ `ash`ì„ ì‚¬ìš©í•˜ê±°ë‚˜. Docker imageëŠ” ëŒ€ê°œ ê²½ëŸ‰í™”ë¥¼ ìœ„í•´ alpine linuxë¥¼ ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìœ¼ë‹ˆ, dockerë¥¼ ì•ìœ¼ë¡œë„ ê³„ì† ì‚¬ìš©í•  ì˜ˆì •ì´ë¼ë©´ ì‹¤í–‰í™˜ê²½ ì¤‘ bashê°€ ì—†ëŠ” ê²½ìš°ê°€ ê³„ì† ìƒê¸¸ ê²ƒì´ë‹¤.** ì´í›„ì˜ ì‹œí–‰ì°©ì˜¤ë¥¼ ê·¼ë³¸ì ìœ¼ë¡œ ë§‰ê¸° ìœ„í•´ OSê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” shellì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë‚«ê² ë‹¤ê³  íŒë‹¨í–ˆë‹¤.** ëŒ€ë¶€ë¶„ì˜ POSIX ì‹œìŠ¤í…œì—ì„œ `/bin/sh`ëŠ” ì‹¤í–‰í™˜ê²½ OS ì‚¬ìš©í•˜ëŠ” sh êµ¬í˜„ì²´ì˜ symlinkë¡œ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, shebangì„ `/bin/sh` ë¡œ ë³€ê²½í•˜ë©´ ì—¬ëŸ¬ ì‹¤í–‰í™˜ê²½ì—ì„œ shell executerë¥¼ ì°¾ì§€ ëª»í•´ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì¼ì€ ì—†ì„ ê²ƒì´ë‹¤.

Shell script ìƒë‹¨ì˜ shebangì„ `#!/bin/bash` Â -> `#!/bin/sh` ë¡œ ìˆ˜ì •í•˜ë‹ˆ ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆë‹¤.

## ì°¸ê³ 

- [Shebang (Unix) - Wikipedia](https://en.wikipedia.org/wiki/Shebang_(Unix))
- [Alpine Linux](https://alpinelinux.org/)
- [Difference between sh and Bash - StackOverflow](https://stackoverflow.com/questions/5725296/difference-between-sh-and-bash)
