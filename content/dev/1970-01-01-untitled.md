---
title: 테스트 코드는 읽기 좋아야 한다.
slug: untitled
date_published: 1970-01-01T00:00:00.000Z
date_updated: 2021-12-12T17:01:22.000Z
draft: true
---

좋은 테스트 코드란 무엇일까? 좋은 테스트 코드가 가진 여러가지 특성이 있을 것이다. 테스트 커버리지가 높을수록 실수로 빼먹는 엣지 케이스가 줄어들 확률이 높다. 

---

# How to add good e2e tests

## Format

- [HTTP Method, API path]를 단위로 describe()로 묶어 관리한다.
- describe()의 첫번째 인자로 [HTTP Method, API path]를 스트링으로 넘긴다.
- describe() 하위에 여러 개의 test()를 두어 테스트한다.
- test()는 해당 API의 use case 중 발생 가능한 성공/실패 케이스를 발생시켜보고, 예상했던대로 작동하는지 확인한다.

    
      describe('POST /oauth/client', () => { 
        test('성공 해야하는 케이스 1', () => { ... });
        test('성공 해야하는 케이스 2', () => { ... }); 
        test('실패 해야하는 케이스 1', () => { ... }); 
        test('실패 해야하는 케이스 2', () => { ... }); 
        ...
      });
    
      describe('GET /oauth/client', () => { 
        test('성공 해야하는 케이스 1', () => { ... });
        test('성공 해야하는 케이스 2', () => { ... }); 
        test('실패 해야하는 케이스 1', () => { ... }); 
        test('실패 해야하는 케이스 2', () => { ... }); 
        ...
      });
    
    

- 하나의 test()는 `BUILD -> OPERATE -> CHECK` 3개의 파트로 나뉘고, 파트 사이에 line break를 두어 구분한다.

    
      describe('POST /oauth/client', () => {
        test('등록 성공 케이스 1', async () => {
          // 1. BUILD : 테스트에 필요한 사전 세팅하는 파트
          const appInfo = testHelper.generateAppInfo(APP_ID, APP_NAME);
          await registerApp(appInfo) 
    
          // 2. OPERATE : 테스트를 수행하는 파트 
          const result = await controller.handler(); // API 핸들러 함수를 호출
    
          // 3. CHECK : 결과가 예상대로 나오는지 체크하는 파트
          expect(result).toBe(expectedAnswer);
        });
      });
    
    

## Note

- 
한 번에 하나의 기능만 테스트한다.

- 
테스트 코드는 가독성이 가장 중요하다. 하나의 테스트가 불필요하게 길어지면 함수로 분리해 크기를 줄인다 (특히 BUILD 파트)

- 
각 테스트가 독립적으로 실행될 수 있도록 구현한다. 이전 테스트의 결과가 다음 테스트에 영향을 주지 않도록 한다.

- 
[Test case](https://docs.google.com/spreadsheets/d/1pJYUP7Kl1rKUFID68YA8VFEswBS4hykZewks_JOYmjA/edit#gid=1754012191) 문서 참고
